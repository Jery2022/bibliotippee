{% extends 'base.html.twig' %}

{% block title %}Détails{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% endblock %}

{% block body %}

<p class = "display-5 text-center fw-bold 
        text-body-emphis mt-5 mb-5">{{document.title}}
</p>
<div class="mb-3">
    <div class="row p-2 g-2 d-flex flex-wrap bg-white border">
            <div class=" col-md-3">
                {% if document.fileNameImageDocument  %}
                    <img src="{{ vich_uploader_asset(document, 'imageDocument') }}"  
                        class="img-fluid rounded-start" 
                        alt="affiche {{ document.title }}" 
                    />
                
                {% else %}
                    <img src="{{ asset('build/images/default/image-default.png')}}" 
                        class="img-fluid rounded-start" alt="affiche {{document.title}}"/>
                {% endif %}
            </div>
            <div class=" col-md-5">
                <div class="card-body">
                    <h5 class="card-title">Auteur : {{ document.author }}</h5>
                    <p class="card-text">Description :</p>
                    <p class="card-text">{{ document.description|raw }}</p>
                    <p class="card-text"><small 
                        class="text-body-secondary">
                        Archivé le : {{ document.publishAt ? document.createdAt|date('d-m-Y') : ' ' }} - 
                        Publié le : {{ document.publishAt ? document.publishAt|date('d-m-Y') : ' ' }}  
                    </small></p>
                    <div >
                        <span class="card-text"><small 
                        class="text-body-secondary">Note moyenne : </small></span>
                        {% if averageRate %}
                            {% for i in range(5,1,-1) %}
                                <input disabled="disabled" type="radio" id="avgstar{{ i }}" name="avgstar" value="{{ i }}">
                                <label="avgstar{{ i }}" title="{{i}} étoiles">{{i}} étoiles</label>
                            {% endfor %}
                        {% else %}
                            <span 
                            class="card-text">Il n'y a pas de note pour ce document. Soyez le premier à fournir une note !</span>
                        {% endif %}
                    </div>
                    <div class="d-flex justify-content-between mt-3">
                        <a href="# {#{ path('app_document_open', {'id': document.id}) } #} ">Lire</a>
                        {% if app.user  %}
                            <a href=" #{#{ path('app_document_download', {'id': document.id}) }#} ">Télécharger</a>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="card col-md-4 bg-primary">
                    <h4 class=" text-center mt-3 p-2">Laisser une note et un avis </h4>
                    <div class="card m-3 p-3" > 
                            {% if user %}
                                {% include "partials/comment/_form_comment.html.twig" %} 
                            {% else %}
                                <p>Vous devez être connecté pour pouvoir télécharger, donner une note et laisser un avis. Connectez-vous ?
                                    <a href="{{path('app_login')}}">Je me connecte</a>
                                </p> 
                            {% endif %}
                    </div>
            </div>
    </div>
</div>

{#
<div>
    <img src="{{ vich_uploader_asset(user, 'imageFileAvatar') }}" 
            class="img-fluid rounded-start" 
            alt="affiche {{ user.pseudo }}" 
            width="100px"
            higth="100px"/>
</div>
#}
<div class="row text-center m-5">
    <a href="{{ path('app_document_index') }}">Retour à la liste</a>
</div>
{% endblock %}


