{% extends 'base.html.twig' %}

{% block title %}Détails{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% endblock %}

{% block body %}

<p class = "display-5 text-center fw-bold 
        text-body-emphis mt-5 mb-5">Détails du document : {{document.title}}
</p>
<div class="card mb-3">
    <div class="row g-1">
            <div class="card col-md-3">
                {% if document.fileNameImageDocument  %}
                    <img src="{{ vich_uploader_asset(user, 'imageFileAvatar') }}"  
                        class="img-fluid rounded-start" 
                        alt="affiche {{ document.title }}" 
                        
                        />
                
                {% else %}
                    <img src="{{ asset('build/images/image-default.png')}}" 
                        class="img-fluid rounded-start" alt="affiche {{document.title}}"/>
                {% endif %}
            </div>
            <div class="card col-md-5">
                <div class="card-body">
                    <h5 class="card-title">Auteur : {{ document.author }}</h5>
                    <p class="card-text">Description :</p>
                    <p class="card-text">{{ document.description|raw }}</p>
                    <p class="card-text"><small 
                        class="text-body-secondary">Publié le : {{ document.publishAt ? document.publishAt|date('d-m-Y') : ' ' }} - 
                        Archivé le : {{ document.publishAt ? document.createdAt|date('d-m-Y') : ' ' }}
                    </small></p>
                    <div >
                        <span class="card-text"><small 
                        class="text-body-secondary">Note moyenne : </small></span>
                        {% if averageRate %}
                            {% for i in range(5,1,-1) %}
                                <input disabled="disabled" type="radio" id="avgstar{{ i }}" name="avgstar" value="{{ i }}">
                                <label="avgstar{{ i }}" title="{{i}} étoiles">{{i}} étoiles</label>
                            {% endfor %}
                        {% else %}
                            <span><small 
                        class="card-text">Il n'y a pas de note pour ce document. Soyez le premier à fournir une note !<small></span>
                        {% endif %}
                    </div>
                    <div class="d-flex justify-content-between mt-3">
                        <a href="# {#{ path('app_document_open', {'id': document.id}) } #} ">Lire</a>
                        <a href=" #{#{ path('app_document_download', {'id': document.id}) }#} ">Télécharger</a>
                    </div>
                </div>
            </div>
            <div class="card col-md-4">
                    <h4 class="text-center mt-4">Laisser une note et un avis </h4>
                    <div class=" m-3 px-3" > 
                            {% if user %}
                                {% include "partials/comment/_form_comment.html.twig" %} 
                            {% else %}
                                <p>Vous devez être connecté pour pouvoir laisser une note et un avis. Connectez-vous ?
                                    <a href="{{path('app_login')}}">Je me connecte</a>
                                </p> 
                            {% endif %}
                    </div>
            </div>
    </div>
</div>

{#
<div>
    <img src="{{ vich_uploader_asset(user, 'imageFileAvatar') }}" 
            class="img-fluid rounded-start" 
            alt="affiche {{ user.pseudo }}" 
            width="100px"
            higth="100px"/>
</div>
#}
<div class="row text-center mt-5">
    <a href="{{ path('app_document_index') }}">Retour à la liste</a>
</div>
{% endblock %}


